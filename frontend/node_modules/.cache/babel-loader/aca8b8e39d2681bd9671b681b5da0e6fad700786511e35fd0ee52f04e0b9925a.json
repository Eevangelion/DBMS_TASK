{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { getAccessToken, getCode, getJWToken, getUserInfo } from '../actions/authActions';\nconst initialState = {\n  code: null,\n  loading: false\n};\nexport const authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    setCode: {\n      reducer: (state, action) => {\n        state.code = action.payload;\n      },\n      prepare: getCode\n    },\n    logout: state => {\n      localStorage.removeItem('userToken');\n      state.code = null;\n      state.accessToken = undefined;\n      state.user = undefined;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(getAccessToken.fulfilled, (state, action) => {\n      state.code = null;\n      state.accessToken = action.payload.token;\n      state.loading = false;\n      state.error = undefined;\n    }).addCase(getAccessToken.pending, state => {\n      state.loading = true;\n    }).addCase(getAccessToken.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    }).addCase(getJWToken.pending, state => {\n      state.loading = true;\n      state.error = undefined;\n    }).addCase(getJWToken.fulfilled, (state, action) => {\n      localStorage.setItem('userToken', action.payload.AuthToken);\n      state.accessToken = undefined;\n      state.loading = false;\n    }).addCase(getJWToken.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    }).addCase(getUserInfo.pending, state => {\n      state.loading = true;\n    }).addCase(getUserInfo.fulfilled, (state, action) => {\n      state.user = action.payload;\n      state.loading = false;\n    }).addCase(getUserInfo.rejected, (state, action) => {\n      var _action$payload;\n      state.loading = false;\n      state.error = (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.error_message;\n    });\n  }\n});\nexport const {\n  setCode,\n  logout\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","getAccessToken","getCode","getJWToken","getUserInfo","initialState","code","loading","authSlice","name","reducers","setCode","reducer","state","action","payload","prepare","logout","localStorage","removeItem","accessToken","undefined","user","extraReducers","builder","addCase","fulfilled","token","error","pending","rejected","setItem","AuthToken","error_message","actions"],"sources":["/home/ivan/working/DBMS_TASK/frontend/src/store/reducers/auth.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\nimport { getAccessToken, getCode, getJWToken, getUserInfo } from '../actions/authActions';\n\n\nconst initialState = {\n    code: null,\n    loading: false\n};\n\nexport const authSlice = createSlice({\n    name: 'auth',\n    initialState,\n    reducers: {\n        setCode: {\n            reducer: (state, action) => {\n                state.code = action.payload;\n            },\n            prepare: getCode\n        },\n        logout: (state) => {\n            localStorage.removeItem('userToken');\n            state.code = null;\n            state.accessToken = undefined;\n            state.user = undefined;\n        }\n    },\n    extraReducers: (builder) => {\n        builder\n            .addCase(getAccessToken.fulfilled, (state, action) => {\n                state.code = null;\n                state.accessToken = action.payload.token;\n                state.loading = false;\n                state.error = undefined;\n            })\n            .addCase(getAccessToken.pending, (state) => {\n                state.loading = true;\n            })\n            .addCase(getAccessToken.rejected, (state, action) => {\n                state.loading = false;\n                state.error = action.payload;\n            })\n\n            .addCase(getJWToken.pending, (state) => {\n                state.loading = true;\n                state.error = undefined;\n            })\n            .addCase(getJWToken.fulfilled, (state, action) => {\n                localStorage.setItem('userToken', action.payload.AuthToken);\n                state.accessToken = undefined;\n                state.loading = false;\n            })\n            .addCase(getJWToken.rejected, (state, action) => {\n                state.loading = false;\n                state.error = action.payload;\n            })\n            .addCase(getUserInfo.pending, (state) => {\n                state.loading = true;\n            })\n            .addCase(getUserInfo.fulfilled, (state, action) => {\n                state.user = action.payload;\n                state.loading = false;\n            })\n            .addCase(getUserInfo.rejected, (state, action) => {\n                state.loading = false;\n                state.error = action.payload?.error_message;\n            });\n    }\n});\n\nexport const { setCode, logout } = authSlice.actions;\nexport default authSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}